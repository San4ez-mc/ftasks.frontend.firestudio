# Огляд та технічна специфікація додатку FINEKO

## 1. Загальна концепція

FINEKO — це комплексний інструмент для управління бізнесом, розроблений для підвищення продуктивності та організованості всередині компанії. Він об'єднує управління щоденними задачами, постановку довгострокових цілей (Результати), картографування організаційної структури, візуалізацію бізнес-процесів та обмін знаннями (Інструкції) в єдину, цілісну платформу. Додаток побудований навколо чіткої ієрархії та акцентує увагу на підзвітності та ясності в усіх операціях.

Основна модель взаємодії з користувачем:
1.  Користувач входить у систему через Telegram.
2.  Користувач обирає Компанію (робочий простір).
3.  Користувач потрапляє на головну панель інструментів, яка за замовчуванням є сторінкою "Задачі щоденні".

---

## 2. Основні модулі та сутності

### 2.1. Автентифікація та Користувачі

-   **Автентифікація**: Єдиний метод автентифікації — через Telegram. Бекенд отримує дані користувача від віджета/бота Telegram і видає токен JWT для управління сесією.
-   **Користувач (`User`)**: Представляє особу, яка може увійти в систему. Обліковий запис користувача є глобальним і може бути пов'язаний з кількома компаніями.
-   **Співробітник (`Employee`)**: Представляє профіль користувача *всередині* конкретної компанії. Він містить специфічні для компанії дані, такі як посада, статус та нотатки.

### 2.2. Компанії

-   **Компанія** — це основний робочий простір або організація. Всі дані, такі як задачі, співробітники та результати, прив'язані до однієї компанії.
-   Користувач може бути членом або власником кількох компаній і повинен обрати одну після входу, щоб продовжити.

### 2.3. Задачі (`Task`)

-   **Концепція**: Задачі — це щоденні операційні одиниці роботи. Це атомарні, дієві елементи, призначені конкретному користувачеві з конкретною датою виконання.
-   **Матриця Ейзенхауера**: Задачі класифікуються за допомогою матриці Ейзенхауера (поле `type`) для допомоги в пріоритезації:
    -   `important-urgent` (важливі-термінові)
    -   `important-not-urgent` (важливі-нетермінові)
    -   `not-important-urgent` (неважливі-термінові)
    -   `not-important-not-urgent` (неважливі-нетермінові)
-   **Облік часу**: Кожна задача має `expectedTime` (очікуваний час) та `actualTime` (фактичний час) для відстеження ефективності.
-   **Зв'язок**: Задача завжди призначається одному `assignee` (виконавцю) і створюється одним `reporter` (постановником). Вона може бути опціонально пов'язана з `Result` (Результатом), щоб показати, як щоденна робота сприяє досягненню більших цілей.

### 2.4. Результати (`Result`)

-   **Концепція**: Результати представляють більші, стратегічні цілі або Ключові Результати (як в OKR). Вони мають довгостроковий дедлайн і використовуються для відстеження прогресу у досягненні значущих цілей компанії.
-   **Ієрархія**: Результат може бути розбитий на менші, вимірювані **Під-результати** (`subResults`). Кожен під-результат — це простий елемент чек-листа (назва, статус завершення).
-   **Зв'язок**: Результат призначається одному `assignee` (виконавцю) і створюється одним `reporter` (постановником). Він служить батьківським контейнером для кількох `Tasks` (Задач), які сприяють його виконанню.

### 2.5. Організаційна структура

-   **Концепція**: Визначає ієрархію та підпорядкування в компанії. Це візуальний інструмент для розуміння, хто за що відповідає.
-   **Відділення (`Division`)**: Найвищий рівень організаційних одиниць (наприклад, Фінанси, Маркетинг, Операційний відділ).
-   **Відділи (`Department`)**: Підрозділи всередині Відділення (наприклад, відділ "Продажів" знаходиться у відділенні "Роботи з публікою").
-   **ЦКП (Цінний Кінцевий Продукт)**: Ключова концепція для кожного відділу. Це цінний, фінальний продукт, за виробництво якого відповідає відділ. Це визначає його мету.
-   **Зв'язок**: Структура має вигляд `Відділення` -> `Відділ` -> `Співробітник`. Співробітник призначається до одного або кількох відділів і має керівника.

### 2.6. Бізнес-процеси (`Process`)

-   **Концепція**: Візуальний інструмент для картографування та стандартизації робочих процесів компанії (схожий на BPMN - Business Process Model and Notation).
-   **Доріжки (Lanes)**: Кожен процес розділений на горизонтальні "доріжки", де кожна доріжка представляє певну роль або відділ (наприклад, "HR-менеджер", "Бухгалтер").
-   **Кроки (Steps)**: У межах кожної доріжки є окремі кроки, які представляють дії або рішення в процесі. Кроки впорядковані та можуть бути з'єднані для створення потоку.
-   **Точки збереження даних**: Певні кроки можуть бути позначені як точки, де дані створюються або оновлюються у зовнішній системі (наприклад, "CRM", "Google Sheets"), що забезпечує ясність потоку даних.

### 2.7. Інструкції (`Instruction`)

-   **Концепція**: База знань або вікі для компанії. Це збірка документів, що містять інструкції, процедури та важливу інформацію.
-   **Багатий контент**: Вміст зберігається у форматі HTML для підтримки форматування, зображень та вбудованих відео.
-   **Контроль доступу**: Кожна інструкція має `accessList`, який визначає, які користувачі можуть переглядати або редагувати її, дозволяючи створювати приватну або специфічну для відділу документацію.

### 2.8. Шаблони (`Template`)

-   **Концепція**: Використовуються для автоматизації створення повторюваних задач або результатів.
-   **Приклад**: Шаблон "Щотижневий звіт" може автоматично генерувати нову задачу щопонеділка для відповідального співробітника.
-   **Зв'язок**: Шаблон — це креслення, яке генерує екземпляри `Task` на основі визначеного розкладу (`repeatability`).

### 2.9. Групи Telegram

-   **Концепція**: Дозволяє пов'язувати роботу компанії зі спілкуванням у Telegram. Системні сповіщення, оновлення задач та звіти можуть надсилатися до підключених груп.
-   **Підключення**: Група Telegram підключається до робочого простору компанії за допомогою унікального коду, наданого ботом.
-   **Зіставлення учасників**: Після підключення учасники групи Telegram можуть бути зіставлені з профілями `Employee` у FINEKO.

---

## 3. Моделі даних та зв'язки

*(На основі документації API та існуючих типів)*

### User (Користувач)
`
{
  "id": "string",
  "firstName": "string",
  "lastName": "string",
  "avatar": "string (посилання)",
  "telegramUserId": "string",
  "telegramUsername": "string"
}
`

### Company (Компанія)
`
{
  "id": "string",
  "name": "string",
  "ownerId": "string (посилається на User.id)"
}
`

### Employee (Співробітник)
`
{
  "id": "string",
  "userId": "string (посилається на User.id)",
  "companyId": "string (посилається на Company.id)",
  "firstName": "string",
  "lastName": "string",
  "avatar": "string (посилання)",
  "status": "'active' | 'vacation' | 'inactive'",
  "positions": ["string (посилається на Position.id)"],
  "groups": ["string (посилається на Group.id)"],
  "notes": "string"
}
`

### Task (Задача)
`
{
  "id": "string",
  "title": "string",
  "description": "string",
  "dueDate": "string (YYYY-MM-DD)",
  "status": "'todo' | 'done'",
  "type": "'important-urgent' | 'important-not-urgent' | ...",
  "expectedTime": "number (хвилини)",
  "actualTime": "number (хвилини)",
  "expectedResult": "string",
  "actualResult": "string",
  "assigneeId": "string (посилається на Employee.id)",
  "reporterId": "string (посилається на Employee.id)",
  "resultId": "string (необов'язково, посилається на Result.id)"
}
`

### Result (Результат)
`
{
  "id": "string",
  "name": "string",
  "status": "string",
  "completed": "boolean",
  "deadline": "string (YYYY-MM-DD)",
  "assigneeId": "string (посилається на Employee.id)",
  "reporterId": "string (посилається на Employee.id)",
  "description": "string",
  "expectedResult": "string",
  "subResults": [
    {
      "id": "string",
      "name": "string",
      "completed": "boolean"
    }
  ]
}
`

### Division (Відділення)
`
{
  "id": "string",
  "name": "string",
  "description": "string",
  "order": "number"
}
`

### Department (Відділ)
`
{
  "id": "string",
  "name": "string",
  "divisionId": "string (посилається на Division.id)",
  "managerId": "string (необов'язково, посилається на Employee.id)",
  "ckp": "string (Цінний Кінцевий Продукт)"
}
`
*Примітка: Зв'язок Відділ-Співробітник буде реалізовано через проміжну таблицю `(departmentId, employeeId)`.*

### Process (Процес)
`
{
    "id": "string",
    "name": "string",
    "description": "string",
    "lanes": [{
        "id": "string",
        "role": "string (напр., 'HR-менеджер')",
        "steps": [{
            "id": "string",
            "name": "string",
            "responsibleId": "string (посилається на Employee.id)",
            "order": "number",
            "connections": [{ "to": "string (посилається на Step.id)" }],
            "status": "'new' | 'outdated' | 'problematic' | 'ok'",
            "notes": "string",
            "isDataSavePoint": "boolean",
            "dataSaveLocation": "string"
        }]
    }]
}
`

### Instruction (Інструкція)
`
{
  "id": "string",
  "title": "string",
  "department": "string",
  "content": "string (HTML)",
  "accessList": [
    {
      "userId": "string (посилається на User.id)",
      "access": "'view' | 'edit'"
    }
  ]
}
`
